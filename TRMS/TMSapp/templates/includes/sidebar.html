{% load group_tags %}
{% load static %}

<div class="sidebar" data-color="purple" data-background-color="white" data-image="{% static 'assets/img/sidebar-1.jpg' %}">
    <div class="logo" style="text-align: center; white-space: pre-wrap;">
        <a target="_blank" rel="noopener noreferrer" class="simple-text logo-normal">
            Transport Management<br>System (TMS)
        </a>
    </div>
    <div class="sidebar-wrapper">
        <ul class="nav">
            {% if request.user.is_authenticated %}
                <li class="nav-item {% if 'index' in segment %} active {% endif %}">
                    <a class="nav-link" href="{% url 'dashboard_redirect' %}">
                        <i class="material-icons">dashboard</i>
                        <p>Dashboard</p>
                    </a>
                </li>

    {% if request.user|has_group:"TMS Adminstrator" or request.user|has_group:"Manager" %}
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="material-icons">app_registration</i>
                <p>Registration</p>
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                {% if request.user|has_group:"TMS Adminstrator" %}
                    <a class="dropdown-item" href="{% url 'add_company' %}">Register Company</a>
                    <a class="dropdown-item" href="{% url 'add_tms_admin' %}">Register TMS Administrator</a>
                {% endif %}
                {% if request.user|has_group:"Manager" %}
                    <a class="dropdown-item" href="{% url 'add_driver' %}">Register A Driver</a>
                {% endif %}
            </div>
        </li>
    {% endif %}


                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMaps" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="material-icons">map</i>
                        <p>Maps</p>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMaps">
                        <a class="dropdown-item" href="/view-map">View Map</a>
                        <a class="dropdown-item" href="/view-map">Check Requested Routes</a>
                        <!-- Additional dropdown items related to maps can be added here -->
                    </div>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle dropdown-icon-right" href="#" id="navbarDropdownSettings" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="material-icons">settings</i>
                        <p>Settings</p>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownSettings">
                        <a class="dropdown-item" href="{% url 'change_password' %}">Change Password</a>
                        <!-- Additional dropdown items related to settings can be added here -->
                    </div>
                </li>

                <li class="nav-item ">
                    <a class="nav-link" href="{% url 'login' %}" >
                        <i class="material-icons">directions_run</i>
                        <p>Logout</p>
                    </a>
                </li>

            {% else %}
                <!-- Add links for non-authenticated users here -->
            {% endif %}
        </ul>
    </div>
</div>
